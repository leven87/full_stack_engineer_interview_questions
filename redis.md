### Redis
--- 

#### redis持久化 参见: https://www.huaweicloud.com/articles/db567ece5f84733d85f3158219233aab.html
原因：由于Redis的数据都存放到内存中，如果没有配置持久化，redis重启后数据就会消失了。于是需要开启Redis的持久化功能，将数据保存到磁盘上。当redis重启后，可以从磁盘中恢复数据。   
方式：redis提供两种方式进行持久化，
* RDB持久化（原理是将Redis在内存中的数据库记录定时dump到磁盘上）
  * 过程： RDB持久化是指在指定的时间间隔内将内存中的数据集快照写入磁盘，实际操作过程是fork一个子进程，先将数据集写入临时文件，写入成功后，再替换之前的文件，用二进制压缩存储。
  * 优点： 
    * 备份完美
    * 灾难恢复容易
    * 性能最大化
  * 缺点：
    * 无法保证可用性。系统一旦在定时持久化之前出现宕机现象，此前没有来得及写入磁盘的数据将丢失。
    * fork子进程完成持久化，在数据量较大时，可能导致几百毫秒的服务停止。
* AOF(append only file)持久化，（原理是将Redis的操作日志以追加的方式写入文件）  
  优点：更高的数据安全性，即数据持久性。      
  Redis中提供了3种同步策略：
  * 每秒同步 异步执行，效率非常高，但是每秒同步，所以这一秒内的数据可能会丢失如果宕机。
  * 每修改同步 这个无疑是数据安全性最高的，
  * 不同步
  缺点:
  * 对于大数据而言，RDB恢复速度相对较快，AOF的文件大小通常比RDB大。
  * 同步策略的不同，AOF在运行效率上往往会慢于RDB。
  
