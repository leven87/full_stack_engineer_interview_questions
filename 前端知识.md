### Frontend knowledge
---

#### 跨域 参见: https://juejin.cn/post/6844903882083024910
概念解析: 不同端口； 域名和其对应ip；http和https均不允许跨域。
同源策略限制以下几种行为：  
* Cookie、LocalStorage 和 IndexDB 无法读取
* DOM和JS对象无法获得
* AJAX 请求不能发送

跨域方案:
* jsonp的原理就是利用<script>标签没有跨域限制，通过<script>标签src属性，发送带有callback参数的GET请求，服务端将接口返回数据拼凑到callback函数中，返回给浏览器，浏览器解析执行，从而前端拿到callback函数返回的数据。 jsonp的缺点：只能发送get一种请求。
* 跨域资源共享（CORS）    
它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。 CORS需要浏览器和服务器同时支持。目前，所有浏览器都支持该功能，IE浏览器不能低于IE10。
例子：   
原生js:       
```js
<script>
var xhr = new XMLHttpRequest(); // IE8/9需用window.XDomainRequest兼容

// 前端设置是否带cookie
xhr.withCredentials = false;

xhr.open('post', 'http://tutu1234.xyz/1.php', true);
xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
xhr.send('user=admin');
	
xhr.onreadystatechange = function() {
    if (xhr.readyState == 4 && xhr.status == 200) {
        alert(xhr.responseText);
    }
};
</script>
```
后端php:     
```php
<?php
// 设置允许其他域名访问
header('Access-Control-Allow-Origin:*');
// 设置允许的响应类型
header('Access-Control-Allow-Methods:POST, GET');
// 设置允许的响应头
header('Access-Control-Allow-Headers:x-requested-with,content-type');
echo 'http://image.zhangxinxu.com/image/study/s/s128/mm'. rand(1,20) .'.jpg';
?>
```
